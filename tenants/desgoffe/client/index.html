<!doctype html>
<html lang="fr" data-theme="desgoffe">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Guichet Citoyen - Ville de Desgoffe</title>
        <!-- FontAwesome -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />
        <link rel="manifest" href="manifest.json" />
        <!-- Favicon -->
        <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png" />
        <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png" />
        <!-- Main Style Bundle (Vite) -->
        <script type="module" src="../../../src/main.js"></script>
    </head>

    <body class="bg-canvas text-text-primary min-h-screen flex flex-col font-body antialiased">
        <div class="container mx-auto px-4 max-w-4xl py-8 flex-grow">
            <a href="#main-content" class="skip-link">Passer au contenu principal</a>

            <header class="text-center mb-12 animate-float">
                <div
                    class="inline-block p-4 rounded-full bg-surface-elevated shadow-md mb-6 border border-structural"
                >
                    <img
                        src="../desgoffe.png"
                        alt="Ville de Desgoffe"
                        class="h-20 w-auto"
                        loading="lazy"
                    />
                </div>
                <h1
                    class="text-4xl md:text-5xl font-heading font-bold text-secondary mb-2 uppercase tracking-widest"
                >
                    Guichet Citoyen
                </h1>
                <p
                    class="text-lg text-muted font-serif italic border-t border-b border-structural inline-block py-2 px-8"
                >
                    Ville de Desgoffe - Services Municipaux
                </p>
            </header>

            <main id="main-content" class="w-full space-y-8" role="main">
                <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div
                        class="glass-panel border-l-4 border-l-primary flex items-start space-x-4 bg-surface"
                        role="status"
                    >
                        <i
                            class="fas fa-info-circle text-primary text-xl mt-1"
                            aria-hidden="true"
                        ></i>
                        <p class="text-text-secondary leading-relaxed">
                            Bienvenue au Guichet Citoyen. Utilisez ce portail pour soumettre des
                            demandes officielles qui seront routées vers le bon service.
                        </p>
                    </div>
                    <div
                        class="glass-panel bg-surface-elevated border border-structural/60 text-sm"
                    >
                        <h2 class="text-xs font-bold tracking-widest text-secondary uppercase mb-2">
                            Comment fonctionne cette démo
                        </h2>
                        <p class="text-text-secondary leading-relaxed">
                            Types de dossiers, étiquettes et files d&apos;attente sont définis dans
                            <span class="font-mono text-primary">masala_domains.yaml</span>
                            . Les modules GERDA AI et les objectifs de performance vivent dans
                            <span class="font-mono text-primary">masala_config.json</span>
                            .
                        </p>
                    </div>
                    <div
                        class="glass-panel bg-surface-elevated border border-structural/60 text-sm"
                    >
                        <h2 class="text-xs font-bold tracking-widest text-secondary uppercase mb-2">
                            Profils de démonstration
                        </h2>
                        <p class="text-text-secondary leading-relaxed">
                            <span class="font-semibold text-primary">Standard</span>
                            équilibre toutes les demandes selon leur urgence administrative.
                        </p>
                        <p class="text-text-secondary leading-relaxed mt-1">
                            <span class="font-semibold text-primary">NuisanceFocus</span>
                            met en avant les plaintes de nuisances sonores et de voisinage.
                        </p>
                    </div>
                </section>

                <section
                    class="glass-panel bg-surface-elevated border border-structural/60 space-y-3"
                    aria-label="Configuration du système"
                >
                    <h2 class="text-sm font-bold tracking-widest text-secondary uppercase">
                        Wat deze demo illustreert
                    </h2>
                    <p class="text-sm text-text-secondary">
                        Deze Ticket Masala instantie is geconfigureerd voor de Stad Desgoffe:
                        aanvraagtypes, wijken en prioriteiten zijn gedefinieerd in
                        <span
                            class="font-mono text-xs bg-canvas px-1 py-0.5 rounded border border-structural/60"
                        >
                            masala_domains.yaml
                        </span>
                        en de modules GERDA AI in
                        <span
                            class="font-mono text-xs bg-canvas px-1 py-0.5 rounded border border-structural/60"
                        >
                            masala_config.json
                        </span>
                        .
                    </p>
                    <dl class="grid grid-cols-1 md:grid-cols-3 gap-4 text-xs text-text-secondary">
                        <div class="space-y-1">
                            <dt class="font-semibold text-text-primary">Volledige flow</dt>
                            <dd>
                                Portaal indiening → Ticket Masala API → AI-prioritering → Toewijzing
                                aan gemeentelijke dienst.
                            </dd>
                        </div>
                        <div class="space-y-1">
                            <dt class="font-semibold text-text-primary">Prioriteitscriteria</dt>
                            <dd>
                                Combinatie van aanvraagtype, wijk en verklaarde prioriteit, met
                                toegewijde prestatieprofielen.
                            </dd>
                        </div>
                        <div class="space-y-1">
                            <dt class="font-semibold text-text-primary">
                                Configureerbare variabelen
                            </dt>
                            <dd>
                                Dossiertypes, prioriteitsniveaus, streeftijden en
                                routeringsstrategieën kunnen worden aangepast zonder de code te
                                wijzigen.
                            </dd>
                        </div>
                        <div class="space-y-1 md:col-span-3">
                            <dt class="font-semibold text-text-primary">Demo-profielen</dt>
                            <dd>
                                <span class="font-mono">Standaard</span>
                                voor een evenwichtig loket,
                                <span class="font-mono">OverlastFocus</span>
                                voor een scenario waar geluidsoverlast met prioriteit wordt
                                behandeld.
                            </dd>
                        </div>
                    </dl>
                </section>

                <form id="submissionForm" class="glass-premium space-y-8" novalidate>
                    <!-- Section: Citoyen -->
                    <div class="space-y-6">
                        <h2
                            class="text-2xl text-secondary border-b border-structural pb-2 flex items-center gap-3"
                        >
                            <i class="fas fa-user text-muted text-lg" aria-hidden="true"></i>
                            Informations du Citoyen
                        </h2>

                        <div class="space-y-2">
                            <label
                                for="customerName"
                                class="block text-sm font-bold text-text-primary uppercase tracking-wide after:content-['*'] after:ml-0.5 after:text-error"
                            >
                                Nom Complet
                            </label>
                            <input
                                type="text"
                                id="customerName"
                                name="customerName"
                                required
                                aria-required="true"
                                placeholder="Prénom Nom"
                                autocomplete="name"
                                class="w-full px-4 py-3 bg-canvas border border-structural rounded-component focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors text-text-primary placeholder-muted"
                            />
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-2">
                                <label
                                    for="customerEmail"
                                    class="block text-sm font-bold text-text-primary uppercase tracking-wide after:content-['*'] after:ml-0.5 after:text-error"
                                >
                                    Adresse Électronique
                                </label>
                                <input
                                    type="email"
                                    id="customerEmail"
                                    name="customerEmail"
                                    required
                                    aria-required="true"
                                    placeholder="citoyen@example.be"
                                    autocomplete="email"
                                    class="w-full px-4 py-3 bg-canvas border border-structural rounded-component focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors text-text-primary placeholder-muted"
                                />
                            </div>

                            <div class="space-y-2">
                                <label
                                    for="customerPhone"
                                    class="block text-sm font-bold text-text-primary uppercase tracking-wide"
                                >
                                    Téléphone
                                </label>
                                <input
                                    type="tel"
                                    id="customerPhone"
                                    name="customerPhone"
                                    placeholder="+32 2 555 00 00"
                                    autocomplete="tel"
                                    class="w-full px-4 py-3 bg-canvas border border-structural rounded-component focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors text-text-primary placeholder-muted"
                                />
                            </div>
                        </div>
                    </div>

                    <!-- Section: Demande -->
                    <div class="space-y-6">
                        <h2
                            class="text-2xl text-secondary border-b border-structural pb-2 flex items-center gap-3"
                        >
                            <i class="fas fa-file-alt text-muted text-lg" aria-hidden="true"></i>
                            Détails de la Demande
                        </h2>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-2">
                                <label
                                    for="requestType"
                                    class="block text-sm font-bold text-text-primary uppercase tracking-wide after:content-['*'] after:ml-0.5 after:text-error"
                                >
                                    Type de Demande
                                </label>
                                <div class="relative">
                                    <select
                                        id="requestType"
                                        name="requestType"
                                        required
                                        aria-required="true"
                                        class="w-full px-4 py-3 bg-canvas border border-structural rounded-component appearance-none focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors text-text-primary cursor-pointer"
                                    >
                                        <option value="">-- Sélectionnez un type --</option>
                                        <option value="NUISANCE">Nuisance Sonore</option>
                                        <option value="PERMIS">Demande de Permis</option>
                                        <option value="PLAINTE">Plainte</option>
                                        <option value="DEMANDE">Demande Générale</option>
                                    </select>
                                    <div
                                        class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-muted"
                                    >
                                        <i class="fas fa-chevron-down text-xs"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="space-y-2">
                                <label
                                    for="quartier"
                                    class="block text-sm font-bold text-text-primary uppercase tracking-wide after:content-['*'] after:ml-0.5 after:text-error"
                                >
                                    Quartier
                                </label>
                                <div class="relative">
                                    <select
                                        id="quartier"
                                        name="quartier"
                                        required
                                        aria-required="true"
                                        class="w-full px-4 py-3 bg-canvas border border-structural rounded-component appearance-none focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors text-text-primary cursor-pointer"
                                    >
                                        <option value="">-- Sélectionnez un quartier --</option>
                                        <option value="Centre-Ville">Centre-Ville</option>
                                        <option value="Faubourg Nord">Faubourg Nord</option>
                                        <option value="Quartier Est">Quartier Est</option>
                                        <option value="Zone Industrielle">Zone Industrielle</option>
                                    </select>
                                    <div
                                        class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-muted"
                                    >
                                        <i class="fas fa-chevron-down text-xs"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label
                                for="priorite"
                                class="block text-sm font-bold text-text-primary uppercase tracking-wide after:content-['*'] after:ml-0.5 after:text-error"
                            >
                                Priorité
                            </label>
                            <div class="relative">
                                <select
                                    id="priorite"
                                    name="priorite"
                                    required
                                    aria-required="true"
                                    class="w-full px-4 py-3 bg-canvas border border-structural rounded-component appearance-none focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors text-text-primary cursor-pointer"
                                >
                                    <option value="5">Standard</option>
                                    <option value="10">Urgent</option>
                                    <option value="15">Très Urgent</option>
                                </select>
                                <div
                                    class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-muted"
                                >
                                    <i class="fas fa-chevron-down text-xs"></i>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label
                                for="description"
                                class="block text-sm font-bold text-text-primary uppercase tracking-wide after:content-['*'] after:ml-0.5 after:text-error"
                            >
                                Description de la Demande
                            </label>
                            <textarea
                                id="description"
                                name="description"
                                rows="6"
                                required
                                aria-required="true"
                                aria-describedby="desc-hint"
                                placeholder="Veuillez décrire votre demande en détail. Soyez aussi précis que possible."
                                class="w-full px-4 py-3 bg-canvas border border-structural rounded-component focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors text-text-primary placeholder-muted resize-y"
                            ></textarea>
                            <small id="desc-hint" class="block text-xs text-muted italic">
                                Minimum 10 caractères
                            </small>
                        </div>

                        <div class="space-y-2">
                            <label
                                for="attachment"
                                class="block text-sm font-bold text-text-primary uppercase tracking-wide"
                            >
                                Document Justificatif (PDF uniquement)
                            </label>
                            <div class="relative group cursor-pointer">
                                <input
                                    type="file"
                                    id="attachment"
                                    name="attachment"
                                    accept=".pdf"
                                    aria-describedby="file-hint"
                                    class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"
                                />
                                <div
                                    class="flex items-center justify-center space-x-2 px-6 py-4 bg-surface border-2 border-dashed border-structural rounded-component group-hover:border-primary group-hover:bg-surface-elevated transition-all"
                                >
                                    <i
                                        class="fas fa-paperclip text-muted group-hover:text-primary transition-colors"
                                        aria-hidden="true"
                                    ></i>
                                    <span
                                        id="fileName"
                                        class="text-text-secondary group-hover:text-text-primary transition-colors font-medium"
                                    >
                                        Choisir un fichier PDF
                                    </span>
                                </div>
                            </div>
                            <span id="file-hint" class="sr-only">
                                Seuls les fichiers PDF sont acceptés
                            </span>
                        </div>
                    </div>

                    <!-- Section: Soumission -->
                    <div class="space-y-6 pt-6 border-t border-structural">
                        <h2
                            class="text-2xl text-secondary border-b border-structural pb-2 flex items-center gap-3"
                        >
                            <i class="fas fa-stamp text-muted text-lg" aria-hidden="true"></i>
                            Soumission
                        </h2>

                        <div
                            class="flex items-start gap-3 p-4 bg-canvas rounded-component border border-structural"
                        >
                            <input
                                type="checkbox"
                                id="declaration"
                                required
                                aria-required="true"
                                class="mt-1 w-5 h-5 accent-primary cursor-pointer"
                            />
                            <label
                                for="declaration"
                                class="text-sm text-text-primary cursor-pointer leading-relaxed"
                            >
                                Je certifie que les informations fournies sont exactes et conformes
                                à la réalité. Je comprends que toute fausse déclaration peut
                                entraîner le rejet de ma demande.
                            </label>
                        </div>

                        <div class="flex flex-col sm:flex-row gap-4 justify-end">
                            <button type="reset" class="btn btn-outline w-full sm:w-auto">
                                <i class="fas fa-redo mr-2" aria-hidden="true"></i>
                                Réinitialiser
                            </button>
                            <button type="submit" class="btn btn-primary w-full sm:w-auto">
                                <i class="fas fa-paper-plane mr-2" aria-hidden="true"></i>
                                Soumettre la Demande
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Loading Overlay -->
                <div
                    id="loadingOverlay"
                    class="fixed inset-0 bg-canvas/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center space-y-4"
                    style="display: none"
                >
                    <div
                        class="w-12 h-12 border-4 border-structural border-t-primary rounded-full animate-spin"
                    ></div>
                    <p class="text-lg font-heading text-secondary animate-pulse">
                        Traitement de votre demande...
                    </p>
                </div>
            </main>

            <footer class="mt-20 py-8 border-t border-structural text-center space-y-2">
                <p class="text-sm font-bold text-secondary tracking-widest uppercase">
                    &copy; 2025 Ville de Desgoffe
                </p>
                <p class="text-xs text-muted">
                    Pour toute question, contactez le Service Municipal au +32 2 555 01 01
                </p>
            </footer>
        </div>

        <script type="module" src="script.js"></script>
    </body>
</html>
